
# é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™

â“æœ‰å“ªäº›é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ¦‚å¿µ <!-- .element: class="fragment" -->

+++

# æ ‡é¢˜
## æ ‡é¢˜
### æ ‡é¢˜
#### æ ‡é¢˜
##### æ ‡é¢˜
###### æ ‡é¢˜

å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿çš„æ­£æ–‡

> å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿çš„å¼•ç”¨

---

## é¢å‘å¯¹è±¡æœ¯è¯­

* **å°è£…**-æŠŠä¸€ä¸ªå•å…ƒçš„å†…éƒ¨å®ç°éšè—èµ·æ¥ï¼Œæ˜¾ç¤ºå°½é‡å°‘çš„æ¥å£ï¼Œä½¿å˜åŒ–å±€é™äºå•å…ƒå†…éƒ¨ 
* **ç»§æ‰¿**-ä½¿ç”¨ç°æœ‰ç±»çš„ä¸€ç§æ–¹å¼ï¼Œå­ç±»å¯ä»¥ç›´æ¥å¤ç”¨çˆ¶ç±»çš„å±æ€§å’Œè¡Œä¸º 
* **ä»£ç†**-ä½¿ç”¨ç°æœ‰ç±»çš„å¦ä¸€ç§æ–¹å¼ï¼Œå°†è¯·æ±‚è½¬æ´¾ç»™å·²æœ‰ç±»çš„å¯¹è±¡ 
* **å¤šæ€**-ä¸åŒç±»å‹çš„å¯¹è±¡èƒ½å“åº”åŒä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œå¹¶è¡¨ç°å‡ºå„è‡ªä¸åŒçš„è¡Œä¸º 

â“é‡è¦ç¨‹åº¦å¦‚ä½•æ’åº <!-- .element: class="fragment" -->

<!--
å°è£…->å§”æ‰˜->ç»§æ‰¿
ç»§æ‰¿çš„é—®é¢˜
-->

---

# åº”å¯¹å˜åŒ–å’Œå¤æ‚

---

# é«˜å†…èš&ä½è€¦åˆ

* **å†…èš**æ˜¯ä¸€ä¸ªç³»ç»Ÿé‡Œå¤šä¸ªéƒ¨åˆ†ä¸€èµ·æ‰§è¡Œå·¥ä½œçš„åº¦é‡ï¼Œæ¥è·å¾—æ¯”æ¯ä¸ªéƒ¨åˆ†å•ç‹¬å·¥ä½œè·å¾—æ›´å¥½çš„ç»“æœ 
* **è€¦åˆ**æ˜¯ä¸€ä¸ªç±»ã€æ–¹æ³•æˆ–è€…ä»»ä½•ä¸€ä¸ªå®ä½“ç›´æ¥ä¸å¦ä¸€ä¸ªå®ä½“è¿æ¥çš„åº¦ 

---

# SOLIDåŸåˆ™ 

âœ¨ä¸€äº›è½¯ä»¶è®¾è®¡çš„åŸåˆ™ <!-- .element: class="fragment" -->  
http://coolshell.cn/articles/4535.html <!-- .element: class="fragment" -->

+++

## å•ä¸€èŒè´£åŸåˆ™(Single Responsibility)

ä¸€ä¸ªç±»åªèƒ½å› ä¸ºä¸€ä¸ªåŸå› æ”¹å˜

<!--
ä»£ç é‡å¤ï¼Œä¸åŒâ€œæ–¹å‘â€çš„å˜åŒ–
-->

+++

## å¼€é—­åŸåˆ™(Open/Close)

è½¯ä»¶å®ä½“(ç±»ã€æ–¹æ³•ï¼Œå¯¹è±¡)å¯¹ä¿®æ”¹å°é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾

<!--
é¢å‘æ¥å£ç¼–ç¨‹ï¼Œç»„åˆç”±äºç»§æ‰¿(LSP)
-->

+++

## é‡Œæ°æ›¿æ¢åŸåˆ™(Liskov's Substitution)

å­ç±»ä¸èƒ½ç ´åçˆ¶ç±»çš„ç±»å‹å®šä¹‰

<!--
ç»§æ‰¿å…³ç³»çš„å¼€é—­åŸåˆ™ï¼Œå¥‘çº¦
-->

+++

## æ¥å£éš”ç¦»åŸåˆ™(Interface Segregation)

å®¢æˆ·ä¸åº”è¯¥è¢«å¼ºè¿«ä¾èµ–å®ƒç”¨ä¸ä¸Šçš„æ–¹æ³•

+++

## ä¾èµ–å€’ç½®åŸåˆ™(Dependency Inversion)

A. ä¸Šå±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä¸‹å±‚æ¨¡å—ï¼Œä¸¤è€…ä¹‹é—´åº”è¯¥ä¾èµ–æŠ½è±¡è€Œä¸æ˜¯å…·ä½“å®ç°
B. æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºæŠ½è±¡

---

## è®¾è®¡æ¨¡å¼

![](http://www.vincehuston.org/images/GoF_full_medium.png)

---

## åˆ›å»ºå‹æ¨¡å¼

* å•ä¾‹æ¨¡å¼
* å·¥å‚æ–¹æ³•æ¨¡å¼
* æŠ½è±¡å·¥å‚æ¨¡å¼
* å»ºé€ è€…æ¨¡å¼
* åŸå‹æ¨¡å¼
* ä¾èµ–æ³¨å…¥æ¨¡å¼

---

## å•ä¾‹æ¨¡å¼

![uml](https://www.tutorialspoint.com/design_pattern/images/singleton_pattern_uml_diagram.jpg)

+++

## å¸¸è§å®ç°
```java
public class ToolManager {
    private static volatile ToolManager mToolManager;
    private static Object mObject = new Object();

    public static ToolManager getInstance(){
        if (mToolManager == null){
            synchronized (mObject) {
                if (mToolManager == null) {
                    mToolManager = new ToolManager();
                }
            }
        }
        return mToolManager;
    }
}
```
â“ä¸ºä»€ä¹ˆè¦è¿™æ ·å®ç° <!-- .element: class="fragment" -->
<!--å»¶è¿ŸåŠ è½½çš„çº¿ç¨‹ä¸å®‰å…¨ï¼Œsynchronizedå¸¦æ¥æ€§èƒ½å¼€é”€ï¼ŒåŒé‡æ£€æŸ¥é”å®šå¿…é¡»ä½¿ç”¨volatile(java 1.5)
-->
[åŒé‡æ£€æŸ¥é”å®šä¸å»¶è¿Ÿåˆå§‹åŒ–](http://www.infoq.com/cn/articles/double-checked-locking-with-delay-initialization) <!-- .element: class="fragment" -->

+++

## æœ€çŸ­çš„çº¿ç¨‹å®‰å…¨å®ç°
```java
public class InstanceFactory {
    private static class InstanceHolder {
        public static Instance instance = new Instance();
    }

    public static Instance getInstance() {
        return InstanceHolder.instance;
    }
}
```

## å•ä¾‹æ¨¡å¼çš„é—®é¢˜

[:imp:ä¸ºä»€ä¹ˆå•ä¾‹æ¨¡å¼æ˜¯é‚ªæ¶çš„]http://www.cnblogs.com/nomoneynowife/p/3719031.html 

---

## å·¥å‚æ¨¡å¼

![uml](https://www.tutorialspoint.com/design_pattern/images/factory_pattern_uml_diagram.jpg)

+++

## æŠ½è±¡å·¥å‚æ¨¡å¼
![uml](https://www.tutorialspoint.com/design_pattern/images/abstractfactory_pattern_uml_diagram.jpg)

+++

## å»ºé€ è€…æ¨¡å¼

![uml](https://www.tutorialspoint.com/design_pattern/images/builder_pattern_uml_diagram.jpg)

+++

## ğŸ‘[æœ›è¿œé•œæ„é€ å‡½æ•°](http://codethataint.com/blog/telescoping-constructor-pattern-java/)
```java
Pizza(int size) { ... } Â  Â  Â  Â 
Pizza(int size, boolean cheese) { ... }    
Pizza(int size, boolean cheese, boolean pepperoni) { ... }    
Pizza(int size, boolean cheese, boolean pepperoni, boolean bacon) { ... }
```

+++

## ğŸ‘è§£å†³æ–¹æ³•

+++

## ğŸ‘è§£å†³æ–¹æ³•(å»ºé€ è€…)
```java
public class Pizza {
  private int size;
  private boolean cheese;
  private boolean pepperoni;
  private boolean bacon;
 
  public static class Builder {
    //required
    private final int size;
 
    //optional
    private boolean cheese = false;
    private boolean pepperoni = false;
    private boolean bacon = false;
 
    public Builder(int size) {
      this.size = size;
    }
 
    public Builder cheese(boolean value) {
      cheese = value;
      return this;
    }
    ...
    public Pizza build() {
      return new Pizza(this);
    }
  }
 
  private Pizza(Builder builder) {
    size = builder.size;
    cheese = builder.cheese;
    pepperoni = builder.pepperoni;
    bacon = builder.bacon;
  }
}
...
Pizza pizza = new Pizza.Builder(12)
                       .cheese(true)
                       .pepperoni(true)
                       .bacon(true)
                       .build();
```
## è¿ç”¨

- IDEæ”¯æŒï¼šhttps://www.jetbrains.com/help/idea/2016.3/replace-constructor-with-builder.html
+++

## 


## åŸå‹æ¨¡å¼

![uml](https://www.tutorialspoint.com/design_pattern/images/prototype_pattern_uml_diagram.jpg)

+++



+++

## ä¾èµ–æ³¨å…¥

